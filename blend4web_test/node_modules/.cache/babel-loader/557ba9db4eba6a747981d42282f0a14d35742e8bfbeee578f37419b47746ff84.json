{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      selectedImage: null,\n      images: [],\n      samplingSteps: 50,\n      cfgScale: 10,\n      denoisingStrength: 0.30,\n      dialog: false // Для контроля видимости диалогового окна\n    };\n  },\n  methods: {\n    handleFileUpload(event) {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = () => {\n          this.selectedImage = reader.result;\n          this.images = []; // Очистка при выборе нового файла\n        };\n        reader.readAsDataURL(file);\n      }\n    },\n    applyChanges() {\n      if (!this.selectedImage) {\n        console.error('Изображение не выбрано');\n        return;\n      }\n      const param2Value = this.samplingSteps.toString();\n      const param3Value = this.cfgScale.toString();\n      const param4Value = this.denoisingStrength.toString();\n      const base64Image = this.selectedImage.split(',')[1];\n      axios.post('http://127.0.0.1:5000/api/custom_task', {\n        param1: base64Image,\n        param2: param2Value,\n        param3: param3Value,\n        param4: param4Value\n      }, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        if (response.data.images && response.data.images.length > 0) {\n          this.images = response.data.images.map(img => `data:image/png;base64,${img}`);\n          this.dialog = true; // Открытие диалогового окна после получения изображений\n        } else {\n          console.error('Ответ сервера не содержит изображения');\n        }\n      }).catch(error => {\n        console.error('Ошибка при запросе к серверу:', error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","data","selectedImage","images","samplingSteps","cfgScale","denoisingStrength","dialog","methods","handleFileUpload","event","file","target","files","reader","FileReader","onload","result","readAsDataURL","applyChanges","console","error","param2Value","toString","param3Value","param4Value","base64Image","split","post","param1","param2","param3","param4","headers","then","response","length","map","img","catch"],"sources":["C:\\Users\\golov\\OneDrive\\Рабочий стол\\projectTest\\blend4web_test\\src\\App.vue"],"sourcesContent":["<template>\n  <v-app>\n    <v-container fluid>\n      <v-file-input label=\"Выбрать файл\" @change=\"handleFileUpload\" class=\"file-input\"></v-file-input>\n      \n      <!-- Отображение изначально выбранного изображения -->\n      <v-img v-if=\"selectedImage\" :src=\"selectedImage\" width=\"300\" height=\"200\" class=\"uploaded-image\"></v-img>\n      \n      <!-- Слайдеры для настройки параметров -->\n      <v-slider v-model=\"samplingSteps\" :label=\"`Sampling Steps: ${samplingSteps}`\" min=\"1\" max=\"100\" step=\"1\" thumb-label=\"always\" class=\"my-5\"></v-slider>\n      <v-slider v-model=\"cfgScale\" :label=\"`CFG Scale: ${cfgScale}`\" min=\"1\" max=\"30\" step=\"1\" thumb-label=\"always\" class=\"my-5\"></v-slider>\n      <v-slider v-model=\"denoisingStrength\" :label=\"`Denoising Strength: ${denoisingStrength}`\" min=\"0\" max=\"1\" step=\"0.01\" thumb-label=\"always\" class=\"my-5\"></v-slider>\n      \n      <v-btn color=\"primary\" @click=\"applyChanges\" class=\"apply-button\">Применить</v-btn>\n    </v-container>\n\n    <!-- Диалоговое окно для отображения результатов -->\n    <v-dialog v-model=\"dialog\" persistent max-width=\"800px\">\n      <v-card>\n        <v-card-title class=\"headline\">Результат</v-card-title>\n        <v-card-text>\n          <div v-for=\"(image, index) in images\" :key=\"'received-' + index\">\n            <v-img :src=\"image\" width=\"300\" height=\"200\" class=\"result-image\"></v-img>\n          </div>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"green darken-1\" text @click=\"dialog = false\">Закрыть</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-app>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      selectedImage: null,\n      images: [],\n      samplingSteps: 50,\n      cfgScale: 10,\n      denoisingStrength: 0.30,\n      dialog: false, // Для контроля видимости диалогового окна\n    };\n  },\n  methods: {\n    handleFileUpload(event) {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = () => {\n          this.selectedImage = reader.result;\n          this.images = []; // Очистка при выборе нового файла\n        };\n        reader.readAsDataURL(file);\n      }\n    },\n    applyChanges() {\n      if (!this.selectedImage) {\n        console.error('Изображение не выбрано');\n        return;\n      }\n\n      const param2Value = this.samplingSteps.toString();\n      const param3Value = this.cfgScale.toString();\n      const param4Value = this.denoisingStrength.toString();\n\n      const base64Image = this.selectedImage.split(',')[1];\n\n      axios.post('http://127.0.0.1:5000/api/custom_task', {\n        param1: base64Image,\n        param2: param2Value,\n        param3: param3Value,\n        param4: param4Value,\n      }, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })\n      .then(response => {\n        if (response.data.images && response.data.images.length > 0) {\n          this.images = response.data.images.map(img => `data:image/png;base64,${img}`);\n          this.dialog = true; // Открытие диалогового окна после получения изображений\n        } else {\n          console.error('Ответ сервера не содержит изображения');\n        }\n      })\n      .catch(error => {\n        console.error('Ошибка при запросе к серверу:', error);\n      });\n    }\n  }\n};\n</script>\n\n<style>\n.file-input, .my-5, .result-image {\n  margin-bottom: 20px;\n}\n\n.uploaded-image, .result-image {\n  margin-top: 20px;\n}\n\n.apply-button {\n  margin-top: 20px;\n}\n</style>\n"],"mappings":"AAmCA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,aAAa,EAAE,IAAI;MACnBC,MAAM,EAAE,EAAE;MACVC,aAAa,EAAE,EAAE;MACjBC,QAAQ,EAAE,EAAE;MACZC,iBAAiB,EAAE,IAAI;MACvBC,MAAM,EAAE,KAAK,CAAE;IACjB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,gBAAgBA,CAACC,KAAK,EAAE;MACtB,MAAMC,IAAG,GAAID,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAClC,IAAIF,IAAI,EAAE;QACR,MAAMG,MAAK,GAAI,IAAIC,UAAU,CAAC,CAAC;QAC/BD,MAAM,CAACE,MAAK,GAAI,MAAM;UACpB,IAAI,CAACd,aAAY,GAAIY,MAAM,CAACG,MAAM;UAClC,IAAI,CAACd,MAAK,GAAI,EAAE,EAAE;QACpB,CAAC;QACDW,MAAM,CAACI,aAAa,CAACP,IAAI,CAAC;MAC5B;IACF,CAAC;IACDQ,YAAYA,CAAA,EAAG;MACb,IAAI,CAAC,IAAI,CAACjB,aAAa,EAAE;QACvBkB,OAAO,CAACC,KAAK,CAAC,wBAAwB,CAAC;QACvC;MACF;MAEA,MAAMC,WAAU,GAAI,IAAI,CAAClB,aAAa,CAACmB,QAAQ,CAAC,CAAC;MACjD,MAAMC,WAAU,GAAI,IAAI,CAACnB,QAAQ,CAACkB,QAAQ,CAAC,CAAC;MAC5C,MAAME,WAAU,GAAI,IAAI,CAACnB,iBAAiB,CAACiB,QAAQ,CAAC,CAAC;MAErD,MAAMG,WAAU,GAAI,IAAI,CAACxB,aAAa,CAACyB,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MAEpD3B,KAAK,CAAC4B,IAAI,CAAC,uCAAuC,EAAE;QAClDC,MAAM,EAAEH,WAAW;QACnBI,MAAM,EAAER,WAAW;QACnBS,MAAM,EAAEP,WAAW;QACnBQ,MAAM,EAAEP;MACV,CAAC,EAAE;QACDQ,OAAO,EAAE;UACP,cAAc,EAAE;QAClB;MACF,CAAC,EACAC,IAAI,CAACC,QAAO,IAAK;QAChB,IAAIA,QAAQ,CAAClC,IAAI,CAACE,MAAK,IAAKgC,QAAQ,CAAClC,IAAI,CAACE,MAAM,CAACiC,MAAK,GAAI,CAAC,EAAE;UAC3D,IAAI,CAACjC,MAAK,GAAIgC,QAAQ,CAAClC,IAAI,CAACE,MAAM,CAACkC,GAAG,CAACC,GAAE,IAAM,yBAAwBA,GAAI,EAAC,CAAC;UAC7E,IAAI,CAAC/B,MAAK,GAAI,IAAI,EAAE;QACtB,OAAO;UACLa,OAAO,CAACC,KAAK,CAAC,uCAAuC,CAAC;QACxD;MACF,CAAC,EACAkB,KAAK,CAAClB,KAAI,IAAK;QACdD,OAAO,CAACC,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACvD,CAAC,CAAC;IACJ;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}